<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8"/>
    <title>대구교통공사 맨홀관리 시스템(DMMS)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand">
            <img src="img/logo.svg" alt="DMMS 로고" class="nav-logo">
            <a href="#" class="logo">대구교통공사 맨홀관리 시스템 (DMMS)</a>
        </div>
        <button class="navbar-toggle" id="navbar-toggle">☰</button>
        <ul class="menu-list" id="menu-list">
       
            <li class="menu-item">
                <a href="#" class="menu-link">데이터 조회</a>
                <ul class="dropdown">
                    <li><a href="#" class="spa-link" data-target="realtime-monitor">모니터링</a></li>
                    <li><a href="#" class="spa-link" data-target="history-search">이력 데이터 검색</a></li>
                    <li><a href="#" class="spa-link" data-target="data-export">데이터 내보내기</a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">장비 관리</a>
                <ul class="dropdown">
                    <li><a href="#" class="spa-link" data-target="device-reg">복합가스측정기</a></li>
                    <li><a href="#" class="spa-link" data-target="remote-control">비상구조</a></li>
                    <li><a href="#" class="spa-link" data-target="status-check">공기호흡기</a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">매뉴얼</a>
                <ul class="dropdown">
                    <li><a href="#" class="spa-link" data-target="stats-daily">작업절차서</a></li>
                    <li><a href="#" class="spa-link" data-target="error-report">작업 전 안전교육</a></li>
                    <li><a href="#" class="spa-link" data-target="kpi">비상복구절차</a></li>
                </ul>
            </li>
            <li class="menu-item">
                <a href="#" class="menu-link">환경 설정</a>
                <ul class="dropdown">
                    <li><a href="#" class="spa-link" data-target="noti-setting">알림 설정</a></li>
                    <li><a href="#" class="spa-link" data-target="theme-change">테마 변경</a></li>
                    <li><a href="#" class="spa-link" data-target="sys-info">시스템 정보</a></li>
                </ul>
            </li>
        </ul>
    </nav>
    <div id="app-container" style="height: calc(100vh - 60px);">
        <button id="toggle-sidebar-btn">◀</button>
        <div id="sidebar">
            <div class="sidebar-header">
                
                <span>관리맨홀</span>
            </div>
            <div id="sidebar-main-content">
                <div id="tree-container"></div>
                <div class="resizer" id="sidebar-resizer"></div>
                <div id="ai-chat-container">
                    <div id="chat-history">
                        <div class="chat-msg ai-msg">안녕하세요! 맨홀관리 AI입니다.</div>
                    </div>
                    <div class="chat-input-area">
                        <input type="text" id="chat-input" placeholder="맨홀 정보 물어보기..." autocomplete="off">
                        <button id="send-btn">전송</button>
                    </div>
                </div>
            </div>
            <footer class="sidebar-footer">
                &copy; 2026 Copyright Electric Conversion Team
            </footer>
        </div>
        <div id="main-content">
            <div id="map"></div>
            <div class="resizer" id="map-resizer" style="display: none;"></div>
            <div id="map-controls">
                <div id="datetime-display"></div>
                <label><input type="checkbox" id="traffic-checkbox"> 실시간 교통</label>
                <label><input type="checkbox" id="weather-checkbox"> 역별 날씨</label>
                <label><input type="checkbox" id="roadview-checkbox"> 로드뷰</label>
            </div>
            <div id="roadview"></div>
        </div>
    </div>

    <!-- SPA 동작 확인용 공통 모달 -->
    <div id="spa-modal-overlay" class="modal-overlay">
        <div class="modal-window">
            <div class="modal-header">
                <h3 id="modal-title">제목</h3>
                <button id="modal-close-btn">&times;</button>
            </div>
            <div class="modal-content" id="modal-body">
                내용이 들어갑니다.
            </div>
        </div>
    </div>

    <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=bfdc537ae38f2581f61b334ea4034de6&libraries=services"></script>
    <script type="module" src="js/main.js"></script>
    <script type="module">
        import { setupMenuEvents } from './js/ui-manager.js';
        setupMenuEvents(); // 메뉴 이벤트 리스너 등록

        // 모바일 메뉴 토글 스크립트 추가
        document.getElementById('navbar-toggle').addEventListener('click', () => {
            document.getElementById('menu-list').classList.toggle('active');
        });
    </script>
</body>
</html>